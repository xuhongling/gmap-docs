import{_ as s,y as a,S as n,M as o}from"./chunks/framework.a6902a73.js";const t="/images/addWmsLayer.gif",E=JSON.parse('{"title":"WMS 简介","description":"","frontmatter":{},"headers":[],"relativePath":"src/functions/dataLoad/WMS.md","filePath":"src/functions/dataLoad/WMS.md"}'),l={name:"src/functions/dataLoad/WMS.md"},p=o(`<h1 id="wms-简介" tabindex="-1">WMS 简介 <a class="header-anchor" href="#wms-简介" aria-label="Permalink to &quot;WMS 简介&quot;">​</a></h1><p>WMS（Web Map Service）是一种标准协议，由开放地理空间联盟（OGC）于1999年开发，用于通过互联网提供地理参考地图图像。这些图像通常由地图服务器从GIS数据库提供的数据生成。</p><p>您可以通过指定参数（如地理范围、图层、样式、投影和输出格式）向WMS服务器发送GetMap请求来获取地图图像。服务器将生成并返回地图图像。</p><p>WMS通常用于可视化大型或复杂的地理空间数据集，或者在公共地图上叠加不同的数据源。</p><p>WMS和WFS的主要区别在于它们提供的数据类型。WMS提供栅格图像，这些图像由WMS服务器创建。这些数据最初可以是矢量或栅格数据，并且已经绘制了样式，但是当它到达客户端时，它只是一个栅格图像。相比之下，WFS提供矢量数据。它允许客户端查询、更新、创建或删除要素。</p><p>WMS的优点在于它能够快速地提供地图图像，而无需客户端下载或处理大量数据。这对于可视化大型或复杂的地理空间数据集非常有用。然而，WMS的缺点在于它只提供栅格图像，无法进行空间分析或编辑。</p><p><strong>请求示例如下所示：</strong></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">http://localhost:8080/geoserver/cite/wms?SERVICE=WMS&amp;VERSION=1.3.0&amp;REQUEST=GetMap&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;layers=cite%3Anc_d_a&amp;WIDTH=256&amp;HEIGHT=256&amp;CRS=EPSG%3A3857&amp;STYLES=&amp;BBOX=12425603.318038251%2C3365675.22945288%2C12445171.197279256%2C3385243.108693885</span></span></code></pre></div><p><strong>Params基础参数</strong></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> baseParams </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">SERVICE</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">WMS</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">VERSION</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1.3.0</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">REQUEST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GetFeatureInfo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">FORMAT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">image/png</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">TRANSPARENT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">QUERY_LAYERS</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">LAYERS</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">]</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><ul><li><em><strong>SERVICE</strong></em> 服务类型，主要包括<code>WMS</code>，<code>WFS</code>等服务，都是遵循OGC标准的服务；</li><li><em><strong>VERSION</strong></em> 请求的WMS的版本号，主要包括<code>1.3.0</code>、<code>1.1.1</code>，<code>1.1</code>等版本号；</li><li><em><strong>REQUEST</strong></em> 请求方式，主要包括以下五种：</li></ul><blockquote><ul><li>请求服务的元数据（GetCapabilities）</li><li>请求地图图像（GetMap）</li><li>请求关于地图要素的信息（GetFeatureInfo，可选）</li><li>请求图例（GetLegendGraphic，可选）</li><li>请求用户定义的样式（GetStyles，可选）</li><li>前面三种比较常用。</li></ul></blockquote><ul><li><em><strong>FORMAT</strong></em> <code>MIME</code>类型，值为服务元数据的输出格式，默认为图片。</li><li><em><strong>TRANSPARENT</strong></em> 值为<code>true</code>或者<code>false</code>，用来表示地图图层是否透明(默认情况下是不透明的)</li><li><em><strong>QUERY_LAYERS</strong></em> 字符类型，值为查询的一个或多个地图图层列表，多个图层之间用<code>,</code>隔开。</li><li><em><strong>LAYERS</strong></em> 字符类型，值为一个或多个地图图层列表，多个图层之间用<code>,</code>隔开</li><li><em><strong>INFO_FORMAT</strong></em> 返回数据的类型，如<code>application/json</code></li><li><em><strong>FEATURE_COUNT</strong></em> 返回结果中要素的数量</li><li><em><strong>WIDTH</strong></em> 地图图片的宽度</li><li><em><strong>HEIGHT</strong></em> 地图图片的高度</li><li><em><strong>CRS</strong></em> 坐标参考系。如<code>EPSG:3857</code></li><li><em><strong>STYLES</strong></em> 图层的地图渲染样式</li><li><em><strong>BBOX</strong></em> 某个CRS下的地图边界范围的坐标序列</li></ul><h2 id="addwmslayer" tabindex="-1"><code>addWmsLayer</code> <a class="header-anchor" href="#addwmslayer" aria-label="Permalink to &quot;\`addWmsLayer\`&quot;">​</a></h2><p>在地图添加<code>WMS</code>图层，可以使用该方法。</p><p><strong>Param</strong></p><table><thead><tr><th>属性</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>Map</td><td><code>ol/Map</code></td><td><code>ol/Map</code> 的地图对象</td></tr><tr><td>Options</td><td><code>WmsOptions</code></td><td>WMS的图层配置，见<code>WmsOptions</code></td></tr></tbody></table><p><strong>WmsOptions</strong></p><table><thead><tr><th>属性</th><th>类型</th><th>默认值</th><th>可选值</th><th>说明</th></tr></thead><tbody><tr><td>layerName</td><td><code>string</code></td><td>-</td><td>必填</td><td>图层名字</td></tr><tr><td>url</td><td><code>string</code></td><td>-</td><td>必填</td><td>服务地址，<code>/wms?</code>前面的url</td></tr><tr><td>layers</td><td><code>string</code></td><td>-</td><td>-</td><td>一个或多个地图图层列表，同<code>LAYERS</code></td></tr><tr><td>filter</td><td><code>Array</code></td><td>-</td><td>-</td><td>过滤地图图层列表，同<code>QUERY_LAYERS</code></td></tr><tr><td>params</td><td><code>ParamsObject</code></td><td>-</td><td>-</td><td>参照上面的Params基础参数</td></tr><tr><td>zIndex</td><td><code>string</code></td><td>5</td><td>-</td><td>图层上下层的叠加顺序</td></tr><tr><td>visible</td><td><code>boolean</code></td><td><code>true</code></td><td>-</td><td>是否显示</td></tr></tbody></table><p><strong>示例</strong></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 引用 addWmsLayer</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">addWmsLayer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">gmap-ol</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> wmsOptions </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://139.224.204.129:8086/geoserver/ChangZhouYS</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">layerName</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">WMS_Layer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">layers</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ChangZhouYS:a_river</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">filter</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">grade=2</span><span style="color:#89DDFF;">\`</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">addWmsLayer</span><span style="color:#BABED8;">(olMap</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> wmsOptions)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p><strong>效果预览图：</strong></p><p><img src="`+t+'" alt=""></p>',23),e=[p];function r(c,d,D,F,y,i){return a(),n("div",null,e)}const g=s(l,[["render",r]]);export{E as __pageData,g as default};
